<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Login</title>
  <link rel="stylesheet" href="login.css" />

</head>

<body>
  <!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-container">
      <a href="#" class="logo">TechFix</a>
      <ul class="nav-links" id="navLinks">
        <li><a href="../index.html">Home</a></li>
      </ul>
      <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation">
        <span></span><span></span><span></span>
      </button>
    </div>
  </nav>

  <div class="login-container">
    <div class="login-box">
      <h2>Sign In</h2>
      <button class="google-btn" id="google-login-btn">
        <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google" class="google-icon" />
        Sign in with Google
      </button>
      <div class="divider">OR</div>
      <form class="login-form" autocomplete="off">
        <input type="text" placeholder="Username" disabled />
        <input type="password" placeholder="Password" disabled />
        <button type="button" class="disabled-btn" disabled>
          Sign in with Username (Coming soon)
        </button>
      </form>
    </div>
  </div>
  <!-- Add this before your login.js script -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-auth.js";

    // Your Firebase config - make sure this matches your project config exactly
    const firebaseConfig = {
      apiKey: "AIzaSyB9aIZfqZvtfOSNUHGRSDXMyWDxWWS5NNs",
      authDomain: "techfix-ef115.firebaseapp.com",
      projectId: "techfix-ef115",
      storageBucket: "techfix-ef115.firebasestorage.app",
      messagingSenderId: "798114675752",
      appId: "1:798114675752:web:33450b57585b4a643b891d",
      measurementId: "G-69MKL5ETH7"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    // Google login button click handler
    document.getElementById('google-login-btn').addEventListener('click', () => {
      signInWithPopup(auth, provider)
        .then((result) => {
          // Google Access Token: result.credential.accessToken
          // Signed-in user info:
          const user = result.user;
          console.log('User signed in:', user);

          // Redirect to home page after login
          window.location.href = '../user/dashboard.html';
        })
        .catch((error) => {
          console.error('Error during sign-in:', error);
          alert('Login failed: ' + error.message);
        });
    });

    // Optional: Detect if user is already logged in, redirect to home
    onAuthStateChanged(auth, (user) => {
      if (user) {
        // User is signed in, redirect to index.html automatically
        window.location.href = '../user/dashboard.html';
      }
    });
  </script>

  <script src="login.js"></script>
</body>

</html>